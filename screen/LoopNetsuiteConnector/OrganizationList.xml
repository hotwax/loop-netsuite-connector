<?xml version="1.0" encoding="UTF-8"?>
<screen
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-1.4.xsd"
    default-menu-index="1">

  <!-- Transition to create a new user account -->
  <transition name="OrganizationDetail"><default-response url="../OrganizationDetail"/></transition>
  <transition name="createUserAccount">
    <service-call name="co.hotwax.configuration.CompanyConfigurationServices.register#Organization" in-map="context"/>
    <default-response url="."/>
  </transition>

  <!-- Show form directly on the screen -->
  <widgets>
    <container-dialog id="CreateUserAccountDialog" button-text="Register Organization">
    <form-single name="CreateUserAccount" transition="createUserAccount">
      <field name="username">
        <default-field title="User Name">
          <text-line size="20"/>
        </default-field>
      </field>
      <field name="userFullName">
        <default-field title="User FullName">
          <text-line size="20"/>
        </default-field>
      </field>
      <field name="organizationName">
        <default-field title="Organization Name">
          <text-line size="40"/>
        </default-field>
      </field>
      <field name="emailAddress">
        <default-field title="Email">
          <text-line size="60"/>
        </default-field>
      </field>
      <field name="contactNumber">
        <default-field title="Contact Number">
          <text-line size="30"/>
        </default-field>
      </field>
      <field name="newPassword">
        <default-field title="Password">
          <password size="15"/>
        </default-field>
      </field>
      <field name="newPasswordVerify">
        <default-field title="Password Verify">
          <password size="15"/>
        </default-field>
      </field>
      <field name="requirePasswordChange">
        <default-field title="Require Password Change?">
          <drop-down>
            <option key="N" text="No"/>
            <option key="Y" text="Yes"/>
          </drop-down>
        </default-field>
      </field>
      <field name="submitButton">
        <default-field title="Create">
          <submit/>
        </default-field>
      </field>
    </form-single>
    </container-dialog>

    <form-list name="OrganizationDetailList" list="organizationDetailList" list-entry="organizationDetail" skip-form="true" header-dialog="true">
          <entity-find entity-name="co.hotwax.netsuite.party.PartyRelationshipAndDetail" list="organizationDetailList">
              <search-form-inputs default-order-by="-fromDate"/>
          </entity-find>
          <field name="fromPartyId">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field title="Organization Party Id">
                  <link text="${fromPartyId}" url="OrganizationDetail" link-type="anchor" parameter-map="[userId:userId, organizationPartyId:fromPartyId]"/>
              </default-field>
          </field>
          <field name="organizationName" from="fromPartyId">
              <default-field title="Organization Name">
                  <display-entity entity-name="co.hotwax.netsuite.party.Organization" text="${organizationName ?: ''}"/>
              </default-field>
          </field>
          <field name="userId">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field><display/></default-field>
          </field>
          <field name="userFullName">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field><display/></default-field>
          </field>
          <field name="emailAddress">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field><display/></default-field>
          </field>
          <field name="username">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field><display/></default-field>
          </field>
          <field name="toPartyId">
              <header-field show-order-by="true"><text-find/></header-field>
              <default-field title="Person Party Id"><display/></default-field>
          </field>
          <field name="findButton">
              <header-field title="Find"><submit/></header-field><default-field>
              <display text=" "/></default-field>
          </field>
    </form-list>
  </widgets>
</screen>
